import{r as s,b as h,l as v,n as y,j as e,P as b,O as j,S as w}from"./index-T45fIfUV.js";import{H as L,F as $}from"./Footer-1BNrb1p2.js";import"./Avatar-XqCtLUOf.js";import"./useIsMounted-qB62NjJt.js";const k=f=>{const[a,x]=s.useState(!1),{coverImageUrl:d,titleOnCover:u}=h(v),r=s.useRef(null),o=s.useRef(null),g=s.useRef(null),m=y(),[,p]=s.useState(!1);function i(){if(window.scrollY<0)return;let t=parseFloat((window.scrollY/window.innerHeight*100).toFixed(2));t>100&&(t=100);const l=parseFloat((t*.2).toFixed(2));let n=1+t/100;n=n>1.3?1.3:n,r.current&&r.current.style.filter!==`blur(${l}px)`&&(r.current.style.filter=`blur(${l}px)`,r.current.style.scale=`${n}`)}function c(){window.scrollY/window.innerHeight*100<30?o.current.classList.add("animate-bounce-sm"):o.current.classList.remove("animate-bounce-sm")}return s.useEffect(()=>{var t;return m.pathname.startsWith("/post/edit")?(t=o.current)==null||t.classList.remove("animate-bounce-sm"):(c(),document.addEventListener("scroll",c)),window.addEventListener("resize",()=>{p(l=>!l)}),()=>{document.removeEventListener("scroll",i),document.removeEventListener("scroll",c)}},[m.pathname]),e.jsxs(e.Fragment,{children:[e.jsx("img",{ref:g,src:d,alt:"Cover Image",style:{display:"none"},onLoad:()=>{x(!0),i(),document.addEventListener("scroll",i)}}),e.jsx(b,{className:`transition-opacity duration-1000 ${a?"opacity-0":"opacity-100"}`,children:"Loading..."}),e.jsxs("main",{className:`h-full font-['Noto_Sans_KR'] dark:text-default-7 text-default-1-dark 
                overflow-x-clip ${f.className}`,children:[e.jsx(L,{}),e.jsx("div",{className:"absolute w-full overflow-hidden mask-bottom",style:{height:`${outerHeight*.9}px`},children:e.jsx("div",{ref:r,className:`h-full transition-opacity duration-1000 
                        bg-center bg-cover ${a?"opacity-100":"opacity-0"}`,style:{backgroundImage:`url(${d})`}})}),e.jsx("div",{className:`absolute w-full flex items-center transition-opacity duration-1000 ${a?"opacity-100":"opacity-0"}`,style:{height:`${outerHeight*.7}px`},children:e.jsx("span",{className:`w-full 
                        text-slate-100 dark:text-default-6 text-xl md:text-3xl text-pretty text-center font-[500]
                        bg-gray-600/55 dark:bg-gray-800/65 ${u&&"py-3 px-5"}`,children:u})}),e.jsx("div",{style:{height:`${outerHeight*.6}px`}}),e.jsxs("div",{className:"bg-default-2 dark:bg-[#101010]",children:[e.jsx("section",{ref:o,style:{visibility:a?"visible":"hidden"},children:e.jsx(j,{})}),e.jsx($,{})]})]}),e.jsx(w,{})]})};export{k as default};
